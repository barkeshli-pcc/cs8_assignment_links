<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Assignment: 99_99_final_project</title>
<link rel="stylesheet" href="modern-style.css">

    <link rel="stylesheet" href="/cs3A_assignment_links/assets/css/style.css">
</head>
<body>
<p>Remember, the project is to be submitted 24 hours before the final presentation date and time. Late submissions will lose 10%</p>
<p>&nbsp;</p>
<p><a id="" class="" title="" href="http://datastructur.es/sp17/materials/proj/proj2/proj2.html" target="">Here</a>&nbsp;is the link to our final project</p>
<p>&nbsp;</p>
<p><a class="instructure_file_link instructure_scribd_file" title="_!sample.txt" href="99-99-_sample.txt"><span style="font-size: 14pt;"><strong>sample batch file</strong></span></a></p>
<p><a class="instructure_file_link instructure_scribd_file" title="_!sample_output.txt" href="99-99-_sample_output.txt"><span style="font-size: 14pt;"><strong>Here is the expected output</strong></span></a></p>
<p><span style="font-size: 14pt;"><strong>Final Presentation:</strong></span></p>
<p>During the scheduled time, you will present your final project and your Multimap class as described below:<br>You must appear on the date and time discussed in class and present your project personally (or via Zoom if so instructed) This is a requirement.&nbsp;</p>
<p class="p1"><span style="font-size: 14pt;"><strong>Purpose:</strong></span></p>
<p class="p2">Program implements a database that responds to sql-like commands:</p>
<p class="p3">&nbsp;</p>
<p class="p1"><span style="font-size: 14pt;"><strong>Grammar:</strong></span></p>
<p class="p1">&nbsp;</p>
<div style="background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;">
<pre style="margin: 0; line-height: 125%;">&lt;CREATE | MAKE&gt; : {  &lt;create | make&gt; table &lt;TABLE_NAME&gt; fields &lt;FIELD_NAME&gt; [, &lt;FIELD_NAME&gt;...]  }
&lt;INSERT&gt; : { insert &lt;INTO&gt; &lt;TABLE_NAME&gt; values &lt;VALUE&gt; [, &lt;VALUE&gt;...]      }
&lt;SELECT&gt; : {  select &lt;* | FIELD_NAME&gt; [, ,FIELD_NAME&gt;...]
					from &lt;TABLE_NAME&gt;
					where &lt;FIELD_NAME&gt; &lt;RELATIONAL_OPERATOR&gt; &lt;VALUE&gt;
						[&lt;LOGICAL_OPERATOR&gt;
							&lt;FIELD_NAME&gt; &lt;RELATIONAL_OPERATOR&gt; &lt;VALUE&gt;...]
			}

&lt;VALUE&gt;  : A <span style="color: #000000;">string</span> of alphanumeric characters, or a <span style="color: #000000;">string</span> of alphanumeric
 			characters and spaces enclosed by <span style="color: #000000;">double</span> quotation marks:
 			<span style="color: #000000;">"Jean Luise"</span>, Finch, <span style="color: #000000;">1923</span>
&lt;RELATIONAL OPERATOR&gt; : [ = | &gt; | &lt; | &gt;= | &lt;= ]
&lt;LOGICAL OPERATOR&gt;    : [and | or]
</pre>
</div>
<p class="p1">&nbsp;</p>
<p class="p1">&nbsp;</p>
<p class="p1"><span style="font-size: 14pt;"><strong>Data Structure:</strong></span></p>
<p class="p3">&nbsp;</p>
<p class="p2">Program uses Maps and Multimaps based on B+Trees as the primary data structure:</p>
<p class="p2">Individual indices, list of indices, list of keywords etc.</p>
<p class="p2">Program uses binary files for disk storage of database record data</p>
<p class="p2">Program uses text files for storing names of fields, tables, number of records and other information that needs to be remembered from session to session.</p>
<p class="p3">Program uses a state machine (an adjacency matrix implementation of a graph) representing the grammar for command line interpretation.</p>
<p class="p1"><strong>table Class:</strong></p>
<p class="p3">&nbsp;</p>
<p class="p2">The table class manages a single table’s field list and data. it will provide methods for creating new tables, retrieving an existing table and responding to select queries.</p>
<p class="p3">&nbsp;</p>
<p class="p1"><strong>SQL Class</strong></p>
<p class="p3">&nbsp;</p>
<p class="p2">the SQL class manages all the tables that has been created in this system (this includes previous sessions). It will provide a command line interface to allow the user to issue sql commands (create, insert and select)</p>
<p class="p3">&nbsp;</p>
<p class="p1"><strong><span style="font-size: 24pt;">Batch</span> Processing:</strong></p>
<p class="p3">&nbsp;</p>
<p class="p2">The SQL class will also provide a batch mode: Constructor will take a file name (a text file) as argument an will execute these commands within:</p>
<p class="p3">&nbsp;</p>
<p class="p3">&nbsp;</p>
<p class="p2">create table student fields last, first, major</p>
<p class="p2">insert into student values Yang, Bo, “Computer Science”<br>insert into student values Davis, John, Math<br>insert into student values Johnson, “Mary Ann”, “Biology”<br>create table employee fields lname, fname, dept, hireyear<br>insert into employee values Jackson, David, Finance, 2016<br>insert into employee values Davidson, “Mary Alice”, complaints, 2012</p>
<p class="p3">&nbsp;</p>
<p class="p2">You will be given a file to test your program for submission and for presentation.</p>
<p class="p3"><span style="font-size: 24pt;"><strong>Output</strong></span><span style="font-size: 18pt;">: batch processing:</span></p>
<pre><span>//****************************************************************************</span>
<span>//		LOGICAL OPERATORS</span>
<span>//****************************************************************************</span>


<span>//.................</span>
<span>//:OR AND         :</span>
<span>//.................</span><span>
[</span><span>104</span><span>] select * from student where fname = Flo or major = CS and age &lt;= </span><span>23</span><span>

Table name: _select_table_343, records: </span><span>3</span><span>
 record          fname          lname          major            age        company

      </span><span>0</span><span>            Flo            Yao             CS             </span><span>20</span><span>         Google
      </span><span>1</span><span>            Flo        Jackson           Math             </span><span>21</span><span>         Google
      </span><span>2</span><span>     Anna Grace        Del Rio             CS             </span><span>22</span><span>           USAF




SQL: DONE.
[</span><span>105</span><span>] select * from employee where last = </span><span>"Van Gogh"</span><span> or last = Jackson and salary &gt;= </span><span>165000</span><span>

Table name: _select_table_347, records: </span><span>5</span><span>
 record           last          first            dep         salary           year

      </span><span>0</span><span>        Jackson            Flo           Math         </span><span>165000</span>           <span>2017</span>
      <span>1</span><span>        Jackson          Billy           Math         </span><span>170000</span>           <span>2017</span>
      <span>2</span><span>       Van Gogh        Vincent            Art         </span><span>240000</span>           <span>2015</span>
      <span>3</span><span>       Van Gogh        Vincent             CS         </span><span>245000</span>           <span>2015</span>
      <span>4</span><span>       Van Gogh        Jim Bob        Phys Ed         </span><span>230000</span>           <span>2010</span><br><br>Consider the example above:</pre>
<ol>
<li class="p3">There are lines of text in the batch file that begin with two slashes: // These lines must be printed back to the screen and otherwise ignored by your SQL class.</li>
<li class="p3">Number your queries starting from zero.</li>
<li class="p3">Print the query back to the screen as seen above.</li>
<li class="p3">output of the select statement must contain the table name (temporary table) and the number of records. This is done in the Table's insertion operator.</li>
<li class="p3">output of the select statements must contain the record headings as seen above.</li>
<li class="p3">make sure the output prints in columns.</li>
<li class="p3">Each record is numbered starting from zero. These are not the record numbers in the original table, but the record numbers in the resulting table.</li>
</ol>
<p class="p3">&nbsp;</p>
<p class="p3">&nbsp;</p>
<p class="p3"><strong>B+ Tree demonstration</strong></p>
<p class="p3">Create a project that includes all the files for your B+Tree to function properly. Write a test function that adds numbers 1 through 200 into a B+Tree with MIN set at 1.</p>
<p class="p3">You will demonstrate the remove function and a few other functionalities of your class.</p>
<p class="p3">&nbsp;</p>
<p class="p1"><strong>Map and Multimap Classes:</strong></p>
<p class="p3">&nbsp;</p>
<p class="p2">They are both based on a B+Tree that<span class="Apple-converted-space">&nbsp; </span>you designed. The only standard library (or code not written by you) used in this program is the string and vector classes.</p>
<p class="p2">Your map and multi map will implement and your program will use the functions detailed in your “Map and Multimap Classes” assignment.</p>
<p class="p3">&nbsp;</p>
<p class="p1"><span style="font-size: 14pt;"><strong>Multimap Presentation:</strong></span></p>
<p class="p2">Create a new project and include all the files necessary to run your FTokenizer and your Multimap classes. Use the code provided as your main.cpp. Test your project with solitude.txt. You may be supplied with a different text file for the final presentation.</p>
<p class="p2">With the exception of the include paths, this code may not be changed.</p>
<p class="p2">&nbsp;</p>
<div style="background: #f8f8f8; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;">
<pre style="margin: 0; line-height: 125%;"><span style="color: #bc7a00;">#include &lt;iostream&gt;</span>
<span style="color: #bc7a00;">#include "../../../includes/tokenize/ftokenizer.h"</span>
<span style="color: #bc7a00;">#include "../../../includes/bplustree/multimap.h"</span>
<span style="color: #bc7a00;">#include "../../../includes/bplustree/map.h"</span>
<span style="color: #bc7a00;">#include &lt;string&gt;</span>

<span style="color: #008000;">using</span> <span style="color: #008000;">namespace</span> std;

MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;</span> get_word_indices(<span style="color: #b00040;">char</span><span style="color: #666666;">*</span> file_name);


<span style="color: #b00040;">int</span> <span style="color: #0000ff;">main</span>(<span style="color: #b00040;">int</span> argc, <span style="color: #b00040;">char</span> <span style="color: #666666;">*</span>argv[])
{
    MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;</span> word_indices;
    word_indices <span style="color: #666666;">=</span> get_word_indices(<span style="color: #ba2121;">"solitude.txt"</span>);
    cout<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl;

    <span style="color: #408080; font-style: italic;">//list all nodes of the index mmap:</span>
    <span style="color: #008000;">for</span> (MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;::</span>Iterator it <span style="color: #666666;">=</span> word_indices.begin();
         it <span style="color: #666666;">!=</span> word_indices.end(); it<span style="color: #666666;">++</span>){
        cout<span style="color: #666666;">&lt;&lt;*</span>it<span style="color: #666666;">&lt;&lt;</span>endl;
    }


    cout<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl;
    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"---------------------------------------------------"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    string this_word <span style="color: #666666;">=</span> <span style="color: #ba2121;">"ice"</span>;
    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"---------------------------------------------------"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"Indices of </span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;">"</span><span style="color: #666666;">&lt;&lt;</span>this_word<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"</span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;">"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    <span style="color: #408080; font-style: italic;">//list indices of this_word:</span>
    <span style="color: #008000;">if</span> (word_indices.contains(this_word)){
        cout<span style="color: #666666;">&lt;&lt;</span>this_word<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">": "</span><span style="color: #666666;">&lt;&lt;</span>word_indices[this_word]<span style="color: #666666;">&lt;&lt;</span>endl;
    }
    cout<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl;

    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"---------------------------------------------------"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    string from <span style="color: #666666;">=</span> <span style="color: #ba2121;">"ask"</span>;
    string to <span style="color: #666666;">=</span> <span style="color: #ba2121;">"asker"</span>;
    <span style="color: #408080; font-style: italic;">//list from .. to:</span>
    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"listing indices from </span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;">"</span><span style="color: #666666;">&lt;&lt;</span>from<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"</span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;"> to </span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;">"</span><span style="color: #666666;">&lt;&lt;</span>to<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"</span><span style="color: #bb6622;">\"</span><span style="color: #ba2121;">"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"---------------------------------------------------"</span><span style="color: #666666;">&lt;&lt;</span>endl;
    <span style="color: #008000;">for</span> (MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;::</span>Iterator it <span style="color: #666666;">=</span>
                word_indices.lower_bound(from);
         it <span style="color: #666666;">!=</span> word_indices.upper_bound(to) <span style="color: #666666;">&amp;&amp;</span>
         it <span style="color: #666666;">!=</span> word_indices.end(); it<span style="color: #666666;">++</span>){
        cout<span style="color: #666666;">&lt;&lt;*</span>it<span style="color: #666666;">&lt;&lt;</span>endl;
    }

    cout <span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span>endl<span style="color: #666666;">&lt;&lt;</span> <span style="color: #ba2121;">"========== E N D  ===================="</span> <span style="color: #666666;">&lt;&lt;</span> endl;
    <span style="color: #008000;">return</span> <span style="color: #666666;">0</span>;
}


MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;</span> get_word_indices(<span style="color: #b00040;">char</span><span style="color: #666666;">*</span> file_name){
    <span style="color: #008000;">const</span> <span style="color: #b00040;">bool</span> debug <span style="color: #666666;">=</span> <span style="color: #008000;">false</span>;
    MMap<span style="color: #666666;">&lt;</span>string, <span style="color: #b00040;">long</span><span style="color: #666666;">&gt;</span> word_indices;
    FTokenizer <span style="color: #0000ff;">ftk</span>(<span style="color: #ba2121;">"solitude.txt"</span>);
    Token t;
    <span style="color: #b00040;">long</span> count <span style="color: #666666;">=</span> <span style="color: #666666;">0</span>;

    ftk <span style="color: #666666;">&gt;&gt;</span> t;
    <span style="color: #008000;">while</span> (ftk.more()){
        <span style="color: #408080; font-style: italic;">//only the "words"</span>
        <span style="color: #008000;">if</span> (t.type_string() <span style="color: #666666;">==</span> <span style="color: #ba2121;">"ALPHA"</span>){
            string s;
            s <span style="color: #666666;">=</span> t.token_str();
            word_indices[s] <span style="color: #666666;">+=</span> count;
            count<span style="color: #666666;">++</span>;
            <span style="color: #008000;">if</span> (debug)
                cout<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"|"</span><span style="color: #666666;">&lt;&lt;</span>t.token_str()<span style="color: #666666;">&lt;&lt;</span><span style="color: #ba2121;">"|"</span><span style="color: #666666;">&lt;&lt;</span>endl;
        }
        ftk <span style="color: #666666;">&gt;&gt;</span> t;
    }
    <span style="color: #008000;">return</span> word_indices;
}
</pre>
</div>
<p class="p2">&nbsp;</p>
<p class="p2">Your code will be fully documented.</p>
</body>
</html>