<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Assignment: st_03_string_tokenizer</title>
<link rel="stylesheet" href="modern-style.css">

    <link rel="stylesheet" href="/cs3A_assignment_links/assets/css/style.css">
</head>
<body>
<h2 style="text-align: center;"><strong>STokenizer Class</strong></h2>
<p><strong> <span style="font-size: 14pt;">Note</span>: Please see description of <a title="ST.00 The State Machine" href="$CANVAS_OBJECT_REFERENCE$/assignments/g708935ef47afc178c8002b0a468df281" data-api-endpoint="https://canvas.pasadena.edu/api/v1/courses/1140672/assignments/9956328" data-api-returntype="Assignment">state machines</a>. </strong></p>
<p>&nbsp;</p>
<p><img src="https://www.dropbox.com/s/o2oanfapl5an3z1/Screenshot%202017-09-30%2000.19.43.png?dl=1" loading="lazy"></p>
<h3><strong>Purpose:</strong></h3>
<p>The String Tokenizer (STokenizer) returns a single token (via the extraction operator) from a string according to the rules set by its internal state machine. For &nbsp;now, the state machine is hard coded inside the STokenizer class, but it should not be difficult to allow the user to set or change the state machine from the calling entity.</p>
<p>The extraction operator of the STokenizer object is repeatedly called to grab the &nbsp;next token in the string.</p>
<p>When no more token can be found in the string, more() and done() will return false and true respectively.&nbsp;</p>
<h3><strong>Token Class:</strong></h3>
<p>The token class is a package that is used by the STokenizer to send <span style="text-decoration: underline;">strings and types</span> of tokens extracted from the input buffer to the calling entity. When a calling function calls the extract operator of the STokenizer, a Token object is returned. The Token class provides simple ways to interact with and report about these token strings.</p>
<p>&nbsp;</p>
<pre><span class="keyword">class</span> Token<span class="operator">
{</span><span class="keyword">
public</span><span class="operator">:</span>
    Token<span class="operator">();</span>
    Token<span class="operator">(</span>string str<span class="operator">,</span><span class="type"> int</span> type<span class="operator">);</span><span class="keyword">
    friend</span> ostream<span class="operator">&amp;</span><span class="keyword"> operator</span><span class="operator"> &lt;&lt;(</span>ostream<span class="operator">&amp;</span> outs<span class="operator">,</span><span class="keyword"> const</span> Token<span class="operator">&amp;</span> t<span class="operator">);</span><span class="type">
    int</span> type<span class="operator">() const;</span>
    string type_string<span class="operator">() const;</span>
    string token_str<span class="operator">() const;</span><span class="keyword">
private</span><span class="operator">:</span>
    string _token<span class="operator">;</span><span class="type">
    int</span> _type<span class="operator">;
};</span></pre>
<h3><strong>Token Types:</strong></h3>
<p>You must use the following constants in your project. Place them in the constants.h file under includes/tokenizer</p>
<div style="background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;">
<pre style="margin: 0; line-height: 125%;"><span style="color: #008800;">const</span> <span style="color: #333399;">int</span> MAX_COLUMNS <span style="color: #333333;">=</span> <span style="color: #0000dd;">256</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> MAX_ROWS <span style="color: #333333;">=</span> <span style="color: #0000dd;">100</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> MAX_BUFFER <span style="color: #333333;">=</span> <span style="color: #0000dd;">200</span>;

<span style="color: #008800;">const</span> <span style="color: #333399;">char</span> ALFA[] <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">char</span> DIGITS[] <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"0123456789"</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">char</span> OPERATORS[] <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"&gt;&lt;=!+-%&amp;|"</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">char</span> SPACES[] <span style="color: #333333;">=</span> {<span style="color: #0044dd;">' '</span>, <span style="color: #0044dd;">'\t'</span>, <span style="color: #0044dd;">'\n'</span>, <span style="color: #0044dd;">'\0'</span>};
<span style="color: #008800;">const</span> <span style="color: #333399;">char</span> PUNC[] <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"?.,:;'`~!"</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> START_DOUBLE <span style="color: #333333;">=</span> <span style="color: #0000dd;">0</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> START_SPACES <span style="color: #333333;">=</span> <span style="color: #0000dd;">4</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> START_ALPHA <span style="color: #333333;">=</span> <span style="color: #0000dd;">6</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> START_OPERATOR <span style="color: #333333;">=</span> <span style="color: #0000dd;">20</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> START_PUNC <span style="color: #333333;">=</span> <span style="color: #0000dd;">10</span>;

<span style="color: #888888;">//token types:</span>
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_NUMBER <span style="color: #333333;">=</span> <span style="color: #0000dd;">1</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_ALPHA <span style="color: #333333;">=</span> <span style="color: #0000dd;">2</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_SPACE <span style="color: #333333;">=</span> <span style="color: #0000dd;">3</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_OPERATOR <span style="color: #333333;">=</span> <span style="color: #0000dd;">4</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_PUNC <span style="color: #333333;">=</span> <span style="color: #0000dd;">5</span>;

<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_UNKNOWN <span style="color: #333333;">=</span> <span style="color: #333333;">-</span><span style="color: #0000dd;">1</span>;
<span style="color: #008800;">const</span> <span style="color: #333399;">int</span> TOKEN_END <span style="color: #333333;">=</span> <span style="color: #333333;">-</span><span style="color: #0000dd;">2</span>;
</pre>
</div>
<p>&nbsp;</p>
<h3><strong>STokenizer Class:</strong></h3>
<ul>
<li>Receives an input string via the CTOR or the set_string function.</li>
<li>Maintains the current position in this string.</li>
<li>Uses a state machine (a graph implemented as an Adjacency Matrix) to recognize valid tokens</li>
<li>_more() and _done() report existance of more tokens in the input string.
<ul>
<li>Test _pos&lt;=strlen(_buffer)</li>
</ul>
</li>
<li>Extraction operator grabs the next token, stores the string and its type in a Token object.&nbsp;
<ul>
<li>Returns an STokenizer reference.&nbsp;</li>
</ul>
</li>
</ul>
<pre><span class="keyword">class</span> STokenizer<span class="operator">
{</span><span class="keyword">
public</span><span class="operator">:</span>
    STokenizer<span class="operator">();</span>
    STokenizer<span class="operator">(</span><span class="type">char</span> str<span class="operator">[]);</span><span class="type">
    bool</span> done<span class="operator">();</span><span class="comment">            //true: there are no more tokens
</span><span class="type">    bool</span> more<span class="operator">();</span><span class="comment">            //true: there are more tokens
    //

    //---------------
    //extract one token (very similar to the way cin &gt;&gt; works)
</span><span class="keyword">    friend</span> STokenizer<span class="operator">&amp;</span><span class="keyword"> operator</span><span class="operator"> &gt;&gt; (</span>STokenizer<span class="operator">&amp;</span> s<span class="operator">,</span> Token<span class="operator">&amp;</span> t<span class="operator">);</span><span class="comment">

    //set a new string as the input string
</span><span class="type">    void</span> set_string<span class="operator">(</span><span class="type">char</span> str<span class="operator">[]);</span><span class="keyword">

private</span><span class="operator">:</span><span class="comment">
    //create table for all the tokens we will recognize
    //                      (e.g. doubles, words, etc.)
</span><span class="type">    void</span> make_table<span class="operator">(</span><span class="type">int</span> _table<span class="operator">[][</span>MAX_COLUMNS<span class="operator">]);</span><span class="comment">

    //extract the longest string that match
    //     one of the acceptable token types
</span><span class="type">    bool</span> get_token<span class="operator">(</span><span class="type">int&amp;</span> start_state<span class="operator">,</span> string<span class="operator">&amp;</span> token<span class="operator">);</span><span class="comment">
    //---------------------------------
</span><span class="type">    char</span> _buffer<span class="operator">[</span>MAX_BUFFER<span class="operator">];</span><span class="comment">       //input string
</span><span class="type">    int</span> _pos<span class="operator">;</span><span class="comment">                       //current position in the string
</span><span class="keyword">    static</span><span class="type"> int</span> _table<span class="operator">[</span>MAX_ROWS<span class="operator">][</span>MAX_COLUMNS<span class="operator">];
};</span></pre>
<p>In the stokenizer.cpp, you must reintroduce the _table static member variable once again:</p>
<pre><span class="type">int</span> STokenizer<span class="operator">::</span>_table<span class="operator">[</span>MAX_ROWS<span class="operator">][</span>MAX_COLUMNS<span class="operator">];</span></pre>
<h3><strong>Testing:</strong></h3>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre><span class="type">    char</span> s<span class="operator">[] =</span><span class="string"> "it was the night of october 17th. pi was still 3.14."</span><span class="operator">;</span>
    STokenizer stk<span class="operator">(</span>s<span class="operator">);</span>
    Token t<span class="operator">;</span><span class="comment">
    //The all too familiar golden while loop:
</span>    stk<span class="operator">&gt;&gt;</span>t<span class="operator">;</span><span class="flow">
    while</span><span class="operator">(</span>stk<span class="operator">.</span>more<span class="operator">()){</span><span class="comment">
        //process token here...
</span>        cout<span class="operator">&lt;&lt;</span>setw<span class="operator">(</span><span class="int">10</span><span class="operator">)&lt;&lt;</span>t<span class="operator">.</span>type_string<span class="operator">()&lt;&lt;</span>setw<span class="operator">(</span><span class="int">10</span><span class="operator">)&lt;&lt;</span>t<span class="operator">&lt;&lt;</span>endl<span class="operator">;</span>


        t<span class="operator"> =</span> Token<span class="operator">();</span>
        stk<span class="operator">&gt;&gt;</span>t<span class="operator">;
    }</span></pre>
<h3><strong>Output:</strong></h3>
<pre>     ALPHA<span class="operator">         |</span>it<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>was<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>the<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>night<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>of<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>october<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
    NUMBER<span class="operator">         |</span><span class="int">17</span><span class="operator">|</span>
     ALPHA<span class="operator">         |</span>th<span class="operator">|</span>
   UNKNOWN<span class="operator">         |.|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>pi<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>was<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
     ALPHA<span class="operator">         |</span>still<span class="operator">|</span>
     SPACE<span class="operator">         | |</span>
    NUMBER<span class="operator">         |</span><span class="float">3.14</span><span class="operator">|</span>
   UNKNOWN<span class="operator">         |.|</span>
</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>